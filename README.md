# Backend Course with Java: Final Project
## E-commerce project You will

Develop the backend of an e-commerce to be able to sell products from a category of your choice.


## User story/brief: 

It will contain the necessary routes to list existing products, enter new products, delete and modify their details, as well as interact with the shopping cart.
CRUD of products.
A RESTful API will be implemented with GET, POST, PUT and DELETE verbs to fulfill all the necessary actions.
You must provide the frontend with an authorized login mechanism based on JWT (Json Web Token).
The entered products will be stored in a MongoDB database. 
The user will be able to register their access credentials (email and password) to later be able to access their account. These credentials will be saved in the MongoDB database encrypting the password.
CRUD of users. (The main Create and Obtain)
The client will have an active user session with a configurable expiration time.
JWT token lifetime can be configured
The server architecture will be layer-based (MVC)
The server will be able to take configurations from an external file. 
Use a Config-server to obtain the properties
An email will be sent to a configurable box, for each new user registration and with each purchase order generated.
With each Request, a log must be recorded at the end of it with AOP.
In case of detecting an error, the server will send an error message with the following minimum fields: the id and the detail of the error.
@ControllerAdvice is used for exception handling
Two options for the frontend: development by the student, or one will be provided to do the necessary tests. (Optional)


### Suggested Parts
We recommend you include:
Spring Boot
MongoDB
JWT
Spring Data with MongoDB
Redis
AOP
Spring Boot mail





## Base Requirements ✅
The Base Requirements will be part of the evaluation criteria to approve the project.
Start: 
To enter the system, a request must be sent to the route '/login' and the data to be sent is email and password. And it will return a JWT to use for all requests to the system.
To register a user, a request must be sent to the route '/user'. And it consists of the full name of the client, telephone number, email and duplicate password field to verify coincidence.
To list the products, use the route '/products' and it will return the list of all available products. for purchase.
The route /products/:category will return the products by the required category. (Pathparam or PathVariable)
To add items to the cart you must use the route '/carrito/add'
In the body you must send: code, quantity.
To list the items in the cart, the route '/cart'.
They can be modified and deleted by their id through the path /cart/:id.

### Flow:
You can request a specific product with the route /products/:id, where id is the id of the item generated by MongoDB (Or use a generated code) and return the product description, price (optional field photo, stock, etc. ). 
is entered /products/:id and the product does not exist in MongoDB, we must respond with an appropriate message indicating something to do with the product not existing.


### Redis:
With each login made by the user verify:
If the user exists in redis, return the JWT token
If the user does not exist in Redis:
Save the user with the token in redis.
Key: username
Value: Token generated with JWT.
The token expiration time is 30 minutes in Redis.
Go to the Database to verify the credentials.

### Log: 
Each request at the end or if there is an exception show in a log.info:
log.info in case of success the method executed and the date of execution.
log.error in case of error the executed method, the execution date and the exception message.

### MongoDB:
Implement at least these collections:
users: registered customers
products: full catalog
Photo link (can be stored statically on the page in a /images/:productid ) (Optional)
Unit price
Description
category

### Cart temporary purchase order
Email
Date and time
Items with their quantities (Arrangement of product codes and quantities)
Delivery address

orders: generated orders, which must include the products, descriptions and prices at the time of purchase.
Items: the orders must be able to have assorted products, each with its quantity. For example: t-shirts x 2 and cap x 1
Order number: It is extracted from the number of stored orders
Date and time
Status (by default in 'generated')
Email of who placed the order.


Once the order is finished, send an email to the address of my account with the details of the order.
There will be an external configuration file with options for development and others for production. As configuration parameters there will be the server listening port, the database url, the mail that will receive notifications from the backend, session expiration time and those that need to be included.



## Extra Requirements ✅
The pro-coders are not included in the evaluation criteria.
The extra requirements are optional features that are not included in the evaluation criteria, but if you lack fun and want to add value to your project... under the only condition that what you include must work!

✅ Twilio SMS and WP: Implementation of SMS and WhatsApp with Twilio to send a message at the end of the order.
✅ Docker: Docker commands to include the necessary images and containers.
✅ Custom item: Possibility of adding selectable characteristics to the product (eg size, color, etc). Customization should not change the price. Selections will be detailed at checkout. For example: 1 x shirt (red) $200 and 2 x shirt (green) $400.
✅ Stock check: Validate stock when trying to generate the order.
✅ My orders: The user will be able to view all the orders that he made through the /order.

